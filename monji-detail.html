<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="祈椿" />
    <meta name="description" content="旗章製造收錄了台灣的各式旗幟與紋章創作。">
    <meta name="keywords" content="旗章製造,旗章,旗幟,國旗,市旗,縣旗,旗幟學,紋章,和紋,家紋,市徽,市章,縣徽,縣章,設計">
    
    <meta itemprop="name" content="旗章製造" />
    <meta itemprop="image" content="https://vexillologytw.github.io/images/tsubaki-2048-shadow">
    <meta itemprop="description" content="旗章製造收錄了台灣的各式旗幟與紋章創作。">
    
    <meta property="og:title" content="旗章製造" />
    <meta property="og:description" content="旗章製造收錄了台灣的各式旗幟與紋章創作。" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://vexillologytw.github.io/images/tsubaki-2048-shadow" />
    
    <meta name="twitter:card" content="https://vexillologytw.github.io/images/tsubaki-2048-shadow" />
    <meta name="twitter:site" content="@vexillology_tw" />
    <meta name="twitter:title" content="旗章製造" />
    <meta name="twitter:description" content="旗章製造收錄了台灣的各式旗幟與紋章創作。" />
    <meta name="twitter:creator" content="@vexillology_tw" />

    <link name="favicon" rel="icon" type="image/x-icon" href="/images/tsubaki-128.png">
    
    <!-- bootstrap -->
    <link rel="stylesheet" href="/plugins/bootstrap/bootstrap.min.css">
    
    <!-- bootstrap icon -->
    <link rel="stylesheet" href="/plugins/bootstrap/bootstrap-icons.min.css">

    <!-- google fonts anton -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="/plugins/googleapis/anton/css2.css">
    
    <!-- google fonts notosans -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="stylesheet" href="/plugins/googleapis/notosans/css2.css">
    
    <link rel="stylesheet" href="/css/font_library.css">
    <style>
        #title-image {
            width: calc(100vw / 10);
        }
        .main-image {
            aspect-ratio: 1/1;
            max-height: calc(40vh);
        }
        .modal-trigger-image {
            cursor: pointer;
        }
    </style>
    <title>載入中...</title>
</head>
<body style="overflow-x: hidden;">
    
    <div data-title="banner" class="title bg-dark d-flex">
        <div class="d-flex flex-wrap justify-content-between w-100 align-items-center py-2 px-2">
            <div class="massive-title anton-regular lh-1 text-white">
                VEXILLOLOGY TAIWAN
            </div>
            <div>
                <img src="/images/tsubaki-white-1024.png" id="title-image" width="300" alt="">
            </div>
        </div>
    </div>
    
    <div data-title="body" class="container d-flex flex-wrap justify-content-center W-100 mb-5">

        <nav aria-title="breadcrumb" class="w-75 py-1">
            <ol class="breadcrumb">
                <li class="breadcrumb-item"><a href="/index.html" class="text-secondary">旗章製造</a></li>
            </ol>
        </nav>

        <div data-title="display" class="d-flex flex-wrap flex-md-nowrap justify-content-center align-items-center w-75 pt-5 my-5">
            <img class="main-image me-md-5 mb-5 mb-md-0 modal-trigger-image" data-type="monji">
            <div class="description noto-sans-tc fs-5"></div>
        </div>

        <div data-title="monji-display" class="w-100 mb-5 my-5">
            <div class="d-flex justify-content-center flex-wrap" id="monji-ctn"></div>
        </div>
    </div>

    <div data-title="footer" class="d-flex justify-content-center bg-dark text-white py-5">
        <div class="noto-sans-tc d-flex align-items-center fs-3">
            祈<img src="/images/tsubaki-white-128.png" class="mx-3" width="50">椿
        </div>
    </div>

    <!-- Modal Trigger -->
    <button type="button" class="d-none" id="image-modal-trigger" data-bs-toggle="modal" data-bs-target="#image-modal"></button>

    <!-- Modal -->
    <div class="modal fade" id="image-modal" tabindex="-1" aria-labelledby="image-modal-label" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered">
            <div class="modal-content" style="border-radius: 0;">
                <div class="modal-body p-0">
                    <img id="modal-image-src" style="width: 100%; position: relative;">
                </div>
            </div>
        </div>
    </div>
    
    <!-- jquery -->
    <script src="/plugins/jquery/jquery-3.7.1.min.js"></script>
    <!-- bootstrap -->
    <script src="/plugins/bootstrap/bootstrap.min.js"></script>
    <script src="/plugins/bootstrap/bootstrap.bundle.min.js"></script>
    <!-- monji & flag data -->
    <script src="/js/monji_data.js"></script>
    <script src="/js/flag_data.js"></script>
    <script>
        const queryString = window.location.search;
        const urlParams = new URLSearchParams(queryString);
        const monjiName = urlParams.get("name");

        var monji = getMonjiByEn(monjiName);
        
        if (monji == null) {
            window.location.href = "/404.html";
        }
        $(function() {
            document.title = monji.md;
            var path = monjiConfig.dir + monji.en + ".png";
            $(".main-image").attr("src", path);
            $(".main-image").attr("alt", monji.title);
            if (monji.desc == undefined || monji.desc.length == 0) {
                $(".description").html("紋的介紹還沒完成，但或許過一段時間它就會自己長出來了。");
            } else {
                $(".description").html(monji.desc);
            }

            buildBreadcrumb(monji);
            
            var subentities = getMonjiesByParentName(monjiName);

            for (var subEntity of subentities) {
                appendImage(subEntity, monjiConfig);
            }
            // show modal on left click on images
            $(".modal-trigger-image").on("mousedown", function(event) {
                // only trigger on left click
                if (event.which != 1) return;
                var imgSrc = $(this).attr("src")
                                    .replace(".png", "-desc.png")
                                    .replace("monjis/", "monjis/descriptions/");
                $("#modal-image-src").attr("src", imgSrc);
                $("#image-modal-trigger").click();
            })
        });

        function buildBreadcrumb(monji) {
            do {
                if (monji.en === monjiName) {
                    $(".breadcrumb").append(`<li class="breadcrumb-item text-secondary">${monji.title_md}</li>`);
                } else {
                    $(".breadcrumb").append(`<li class="breadcrumb-item"><a href="/monji-detail.html?name=${monji.en}" class="text-secondary">${monji.title_md}</a></li>`);
                }
                monji = getMonjiByEn(monji.parent);
            } while (monji !== null);
        }

        function appendImage(image, config) {
            var path = config.dir + image.en + ".png";
            var text = image.title_md;

            if (image.detail) {
                text = `<a class="text-secondary" href="/${config.type}-detail.html?name=${image.en}">${text}</a>`;
            }
            $(`<div class="text-center p-3">
                    <img src="${path}" class="${config.imageClasses}" data-title="${image.en}" data-type="${config.type}" width="${config.width}" height="${config.height}">
                    <br>
                    <div class="noto-sans-tc text-secondary pt-2">${text}</div>
                </div>`
            ).appendTo(config.container);
        }
    </script>
</body>
</html>